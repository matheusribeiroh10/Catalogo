<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Cat√°logo Digital</title>
<style>
body {font-family: Arial, sans-serif; margin:0; background:#f7f7f7; text-align:center;}
header {background:#2b7bba; color:white; padding:10px; font-size:18px; font-weight:bold;
        position:sticky; top:0; z-index:10; display:flex; justify-content:space-between;
        align-items:center;}
#total {font-size:15px; font-weight:bold;}
#marcas-container {display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin:10px;}
.marca-btn {
    flex: 1 1 120px;
    min-width: 130px;
    max-width: 160px;
    padding:10px;
    border:none;
    border-radius:10px;
    font-size:14px;
    background:#2b7bba;
    color:white;
    cursor:pointer;
    word-wrap:break-word;
    white-space:normal;
}
.marca-btn.tudo {
    background:#25d366;
    font-weight:bold;
}
#produtos-container {
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:12px;
    padding:12px;
    max-width:700px;
    margin:auto;
}
.produto {
    background:white;
    border-radius:12px;
    box-shadow:0 2px 5px rgba(0,0,0,0.1);
    padding:10px;
}
.produto img {
    width: 100%;
    height: 160px;
    object-fit: contain;
    border-radius: 10px;
    background: #fff;
}
.qtd-container {
    display:flex; align-items:center; justify-content:center; margin-top:5px;
}
.qtd-container button {
    width:28px; height:28px; border:none; border-radius:6px;
    background:#2b7bba; color:white; font-size:18px; font-weight:bold;
    cursor:pointer;
}
.qtd-container input {
    width:40px; text-align:center; margin:0 5px; border:1px solid #ccc; border-radius:6px;
}
button#enviar {
    background:#25d366; color:white; border:none;
    padding:8px 12px; font-size:14px; border-radius:8px; cursor:pointer;
}
button#voltar {
    background:#e74c3c; color:white; border:none;
    padding:8px 12px; font-size:14px; border-radius:8px; cursor:pointer;
}
#tela-carrinho {
    padding:15px;
}
.carrinho-item {
    background:white; border-radius:10px; margin:8px auto; padding:10px;
    box-shadow:0 2px 5px rgba(0,0,0,0.1); max-width:700px;
    display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.carrinho-item img {
    width:60px; height:60px; border-radius:8px; object-fit:contain;
}
.hidden {display:none;}
</style>
</head>
<body>

<header>
  <span style="font-size:12px; margin-right:5px;">v1.4</span>
  <button id="voltar" onclick="mostrarMarcas()">üîô Marcas</button>
  <div>Cat√°logo Digital<br><span id="total">Total: R$ 0,00</span></div>
  <button id="enviar" onclick="mostrarCarrinho()">üõí Carrinho</button>
</header>

<!-- TELA 1: MARCAS -->
<div id="tela-marcas">
  <h3>Escolha uma Marca</h3>
  <div id="marcas-container">
    <button class="marca-btn tudo" onclick="mostrarProdutos('Tudo')">Tudo</button>
    <button class="marca-btn" onclick="mostrarProdutos('Bauducco')">Bauducco</button>
    <button class="marca-btn" onclick="mostrarProdutos('Danone')">Danone</button>
    <button class="marca-btn" onclick="mostrarProdutos('Divinitos')">Divinitos</button>
    <button class="marca-btn" onclick="mostrarProdutos('Elma Chips')">Elma Chips</button>
    <button class="marca-btn" onclick="mostrarProdutos('FRITOP')">FRITOP</button>
    <button class="marca-btn" onclick="mostrarProdutos('Frutap')">Frutap</button>
    <button class="marca-btn" onclick="mostrarProdutos('Kremoso')">Kremoso</button>
    <button class="marca-btn" onclick="mostrarProdutos('Nestl√©')">Nestl√©</button>
    <button class="marca-btn" onclick="mostrarProdutos('Oz')">Oz Pipocas</button>
    <button class="marca-btn" onclick="mostrarProdutos('Rebeka')">Rebeka Pudim</button>
    <button class="marca-btn" onclick="mostrarProdutos('Rei da Massa')">Rei da Massa</button>
    <button class="marca-btn" onclick="mostrarProdutos('Sacola')">Sacolas</button>
  </div>
</div>

<!-- TELA 2: PRODUTOS -->
<div id="tela-produtos" class="hidden">
  <h3 id="titulo-marca"></h3>
  <div id="produtos-container"></div>
  <button id="enviar" onclick="mostrarCarrinho()">üõí Ver Carrinho</button>
</div>

<!-- TELA 3: CARRINHO -->
<div id="tela-carrinho" class="hidden">
  <h3>üõçÔ∏è Meu Carrinho</h3>
  <div id="itens-carrinho"></div>
  <h3 id="total-carrinho">Total: R$ 0,00</h3>
  <button id="enviar" onclick="enviarWhatsApp()">üì¶ Enviar Pedido</button>
  <button id="voltar" onclick="mostrarProdutos('Tudo')">üîô Continuar Comprando</button>
</div>

<script>
const produtos = [
  {"C√≥digo":"129","descricao":"Danette Chocol 360G","marca":"Danone","valor":82.56,"imagem":"https://imgur.com/CNshggM.png"},
  {"C√≥digo":"64","descricao":"Danette Branco 360G","marca":"Danone","valor":82.56,"imagem":"https://imgur.com/GCbUBfn.png"}
];

let carrinho = {};

// === MOSTRAR PRODUTOS ===
function mostrarProdutos(marca) {
  document.getElementById("tela-marcas").classList.add("hidden");
  document.getElementById("tela-carrinho").classList.add("hidden");
  document.getElementById("tela-produtos").classList.remove("hidden");
  document.getElementById("titulo-marca").textContent =
    marca === "Tudo" ? "Todos os Produtos" : "Marca: " + marca;

  const container = document.getElementById("produtos-container");
  container.innerHTML = "";

  produtos.filter(p => marca === "Tudo" || p.marca === marca).forEach(prod => {
    const div = document.createElement("div");
    div.className = "produto";
    div.innerHTML = `
      <img src="${prod.imagem}" alt="${prod.descricao}">
      <h4>${prod.descricao}</h4>
      <small>(${prod.C√≥digo})</small>
      <p><b>R$ ${prod.valor.toFixed(2)}</b></p>
      <div class="qtd-container">
        <button onclick="alterarQtd('${prod.C√≥digo}', -1)">-</button>
        <input id="qtd-${prod.C√≥digo}" value="${carrinho[prod.C√≥digo]?.qtd || 0}">
        <button onclick="alterarQtd('${prod.C√≥digo}', 1)">+</button>
      </div>
    `;
    container.appendChild(div);
  });
}

// === VOLTAR √Ä TELA DE MARCAS ===
function mostrarMarcas() {
  document.getElementById("tela-produtos").classList.add("hidden");
  document.getElementById("tela-carrinho").classList.add("hidden");
  document.getElementById("tela-marcas").classList.remove("hidden");
}

// === MOSTRAR CARRINHO ===
function mostrarCarrinho() {
  document.getElementById("tela-marcas").classList.add("hidden");
  document.getElementById("tela-produtos").classList.add("hidden");
  document.getElementById("tela-carrinho").classList.remove("hidden");

  const container = document.getElementById("itens-carrinho");
  container.innerHTML = "";

  if (Object.keys(carrinho).length === 0) {
    container.innerHTML = "<p>Seu carrinho est√° vazio üõí</p>";
    document.getElementById("total-carrinho").textContent = "Total: R$ 0,00";
    return;
  }

  for (let c in carrinho) {
    const p = carrinho[c];
    const div = document.createElement("div");
    div.className = "carrinho-item";
    div.innerHTML = `
      <img src="${p.imagem}">
      <div style="flex:1; text-align:left;">
        <b>${p.descricao}</b><br>
        <small>(${p.C√≥digo})</small><br>
        <span>R$ ${p.valor.toFixed(2)}</span>
      </div>
      <div class="qtd-container">
        <button onclick="alterarQtd('${p.C√≥digo}', -1)">-</button>
        <input id="qtd-${p.C√≥digo}" value="${p.qtd}">
        <button onclick="alterarQtd('${p.C√≥digo}', 1)">+</button>
      </div>
    `;
    container.appendChild(div);
  }
  atualizarTotal();
}

// === ALTERAR QUANTIDADE ===
function alterarQtd(codigo, delta) {
  const input = document.getElementById(`qtd-${codigo}`);
  if (!input) return;
  let qtd = parseInt(input.value) + delta;
  if (qtd < 0) qtd = 0;
  input.value = qtd;
  const prod = produtos.find(p => p.C√≥digo === codigo);
  if (qtd > 0) carrinho[codigo] = {...prod, qtd};
  else delete carrinho[codigo];
  atualizarTotal();
}

// === CALCULAR TOTAL ===
function atualizarTotal() {
  let total = 0;
  for (let c in carrinho) total += carrinho[c].valor * carrinho[c].qtd;
  document.getElementById("total").innerText = "Total: R$ " + total.toFixed(2);
  document.getElementById("total-carrinho").innerText = "Total: R$ " + total.toFixed(2);
}

// === ENVIAR WHATSAPP ===
function enviarWhatsApp() {
  if (Object.keys(carrinho).length === 0) return alert("Nenhum item no pedido!");
  let msg = "üõí *Pedido:*%0A";
  for (let c in carrinho) {
    const p = carrinho[c];
    msg += `‚Ä¢ ${p.descricao} (${p.C√≥digo}) - ${p.qtd} un.%0A`;
  }
  const total = Object.values(carrinho).reduce((a,b)=>a+b.valor*b.qtd,0);
  msg += `%0Aüí∞ *Total:* R$ ${total.toFixed(2)}`;
  const url = "https://wa.me/5519992394899?text=" + msg;
  window.open(url, "_blank");
}
</script>

</body>
</html>
